/* https://tailwindcss.com/docs/preflight#disabling-preflight */
@layer external, theme, base, normalize, common_components, components, utilities, top_layer;
@import "tailwindcss/theme.css" layer(theme);
@import "tailwindcss/preflight.css" layer(base);
@import "tailwindcss/utilities.css" layer(utilities);

/* Liveblocks styles for AI docs editor */
@import "@liveblocks/react-ui/styles.css" layer(external);
@import "@liveblocks/react-ui/styles/dark/media-query.css" layer(external);

@import "tw-animate-css";

@import "@assistant-ui/styles/index.css";

@custom-variant dark (&:is(.dark *));

@layer normalize {
	body {
		margin: 0;
		min-width: 320px;
		/* height: 100vh;
		overflow: hidden; */
	}

	a {
		font-weight: 500;
		color: #646cff;
		text-decoration: inherit;
	}

	a:hover {
		color: #535bf2;
	}

	h1 {
		font-size: 3.2em;
		line-height: 1.1;
	}

	button {
		border-radius: 0;
		border: 0;
		padding: 0;
		font: unset;
		background: none;
		cursor: pointer;
		outline: none;
		text-align: unset;
		user-select: none;
	}

	summary {
		list-style: none;
		cursor: pointer;
		outline: none;
		user-select: none;

		&::marker {
			display: none;
		}

		&::-webkit-details-marker {
			display: none;
		}
	}

	*:focus-visible {
		outline: var(--color-base-2-06) solid 2px;
		border-radius: 4px;
	}
}

/* shadcn/ui CSS Variables - Light Mode */
:root {
	/* Core shadcn design system variables */
	--background: white;
	--foreground: var(--gray-000);
	--card: white;
	--card-foreground: var(--gray-000);
	--popover: white;
	--popover-foreground: var(--gray-000);
	--primary: var(--gray-050);
	--primary-foreground: var(--gray-700);
	--secondary: var(--gray-600);
	--secondary-foreground: var(--gray-050);
	--muted: var(--gray-600);
	--muted-foreground: var(--gray-500);
	--accent: var(--gray-600);
	--accent-foreground: var(--gray-050);
	--destructive: var(--red-500);
	--destructive-foreground: var(--gray-700);
	--border: var(--gray-200);
	--input: var(--gray-200);
	--ring: var(--gray-050);
	--chart-1: 12 76% 61%;
	--chart-2: 173 58% 39%;
	--chart-3: 197 37% 24%;
	--chart-4: 43 74% 66%;
	--chart-5: 27 87% 67%;
	--radius: 0.5rem;

	/* Sidebar specific variables */
	--sidebar: var(--gray-700);
	--sidebar-foreground: var(--gray-100);
	--sidebar-primary: var(--gray-050);
	--sidebar-primary-foreground: var(--gray-700);
	--sidebar-accent: var(--gray-800);
	--sidebar-accent-foreground: var(--gray-050);
	--sidebar-border: var(--gray-200);
	--sidebar-ring: var(--gray-100);

	--gray-000: oklch(0.1408 0.0044 285.82);
	--gray-050: oklch(0.2103 0.0059 285.89);
	--gray-100: oklch(0.2739 0.0055 286.03);
	--gray-200: oklch(0.3 0.0119 285.81);
	--gray-300: oklch(0.3703 0.0119 285.81);
	--gray-400: oklch(0.4 0.0119 285.81);
	--gray-500: oklch(0.4377 0.0119 285.81);
	--gray-600: oklch(0.7118 0.0129 286.07);
	--gray-700: oklch(0.83 0.0055 286.29);
	--gray-800: oklch(0.8711 0.0055 286.29);
	--gray-900: oklch(0.9851 0 0);
	--gray-950: oklch(1 0 0);

	--red-200: oklch(0.3 0.1331 25.72);
	--red-300: oklch(0.35 0.1331 25.72);
	--red-400: oklch(0.3958 0.1331 25.72);
	--red-500: oklch(0.45 0.1331 25.72);
	--red-600: oklch(0.5 0.1331 25.72);
	--red-700: oklch(0.55 0.1331 25.72);

	/* https://oklch.fyi/ */

	--color-base-1-01: oklch(0.05 0.001 85);
	--color-base-1-02: oklch(0.088 0.002 85);
	--color-base-1-03: oklch(0.126 0.004 85);
	--color-base-1-04: oklch(0.165 0.005 85);
	--color-base-1-05: oklch(0.203 0.006 85);
	--color-base-1-06: oklch(0.241 0.007 85);
	--color-base-1-07: oklch(0.279 0.008 85);
	--color-base-1-08: oklch(0.317 0.009 85);
	--color-base-1-09: oklch(0.355 0.01 85);
	--color-base-1-10: oklch(0.394 0.011 85);
	--color-base-1-11: oklch(0.432 0.012 85);
	--color-base-1-12: oklch(0.47 0.013 85);

	--color-base-2-01: oklch(0.503 0.004 85);
	--color-base-2-02: oklch(0.544 0.004 85);
	--color-base-2-03: oklch(0.584 0.005 85);
	--color-base-2-04: oklch(0.625 0.005 85);
	--color-base-2-05: oklch(0.666 0.005 85);
	--color-base-2-06: oklch(0.706 0.006 85);
	--color-base-2-07: oklch(0.747 0.006 85);
	--color-base-2-08: oklch(0.787 0.006 85);
	--color-base-2-09: oklch(0.828 0.007 85);
	--color-base-2-10: oklch(0.869 0.006 85);
	--color-base-2-11: oklch(0.909 0.004 85);
	--color-base-2-12: oklch(0.95 0.002 85);

	--color-base-alt-1-01: oklch(0.05 0.002 260);
	--color-base-alt-1-02: oklch(0.087 0.003 260);
	--color-base-alt-1-03: oklch(0.125 0.005 260);
	--color-base-alt-1-04: oklch(0.162 0.006 260);
	--color-base-alt-1-05: oklch(0.199 0.008 260);
	--color-base-alt-1-06: oklch(0.236 0.009 260);
	--color-base-alt-1-07: oklch(0.274 0.011 260);
	--color-base-alt-1-08: oklch(0.311 0.012 260);
	--color-base-alt-1-09: oklch(0.348 0.013 260);
	--color-base-alt-1-10: oklch(0.385 0.015 260);
	--color-base-alt-1-11: oklch(0.423 0.016 260);
	--color-base-alt-1-12: oklch(0.46 0.018 260);

	--color-base-alt-2-01: oklch(0.05 0.001 260);
	--color-base-alt-2-02: oklch(0.1 0.002 260);
	--color-base-alt-2-03: oklch(0.15 0.003 260);
	--color-base-alt-2-04: oklch(0.2 0.004 260);
	--color-base-alt-2-05: oklch(0.25 0.005 260);
	--color-base-alt-2-06: oklch(0.3 0.006 260);
	--color-base-alt-2-07: oklch(0.35 0.007 260);
	--color-base-alt-2-08: oklch(0.4 0.008 260);
	--color-base-alt-2-09: oklch(0.45 0.009 260);
	--color-base-alt-2-10: oklch(0.5 0.01 260);
	--color-base-alt-2-11: oklch(0.55 0.01 260);
	--color-base-alt-2-12: oklch(0.6 0.009 260);

	--color-fg-01: oklch(0.2 0.004 100);
	--color-fg-02: oklch(0.268 0.005 100);
	--color-fg-03: oklch(0.336 0.007 100);
	--color-fg-04: oklch(0.405 0.008 100);
	--color-fg-05: oklch(0.473 0.009 100);
	--color-fg-06: oklch(0.541 0.011 100);
	--color-fg-07: oklch(0.609 0.012 100);
	--color-fg-08: oklch(0.677 0.013 100);
	--color-fg-09: oklch(0.745 0.015 100);
	--color-fg-10: oklch(0.814 0.016 100);
	--color-fg-11: oklch(0.882 0.017 100);
	--color-fg-12: oklch(0.95 0.01 100);

	--color-accent-01: oklch(0.36 0.064 42);
	--color-accent-02: oklch(0.414 0.074 42);
	--color-accent-03: oklch(0.467 0.084 42);
	--color-accent-04: oklch(0.521 0.093 42);
	--color-accent-05: oklch(0.575 0.103 42);
	--color-accent-06: oklch(0.628 0.113 42);
	--color-accent-07: oklch(0.682 0.122 42);
	--color-accent-08: oklch(0.735 0.113 42);
	--color-accent-09: oklch(0.789 0.086 42);
	--color-accent-10: oklch(0.843 0.061 42);

	--color-accent-alt-01: oklch(0.4 0.168 270);
	--color-accent-alt-02: oklch(0.45 0.188 270);
	--color-accent-alt-03: oklch(0.5 0.191 270);
	--color-accent-alt-04: oklch(0.55 0.169 270);
	--color-accent-alt-05: oklch(0.6 0.148 270);
	--color-accent-alt-06: oklch(0.65 0.128 270);
	--color-accent-alt-07: oklch(0.7 0.108 270);
	--color-accent-alt-08: oklch(0.75 0.088 270);
	--color-accent-alt-09: oklch(0.8 0.07 270);
	--color-accent-alt-10: oklch(0.85 0.051 270);

	--color-green-01: oklch(0.255 0.073 147);
	--color-green-02: oklch(0.328 0.093 147);
	--color-green-03: oklch(0.401 0.114 147);
	--color-green-04: oklch(0.474 0.135 147);
	--color-green-05: oklch(0.546 0.156 147);
	--color-green-06: oklch(0.546 0.156 147);
	--color-green-07: oklch(0.619 0.176 147);
	--color-green-08: oklch(0.692 0.19 147);
	--color-green-09: oklch(0.765 0.19 147);
	--color-green-10: oklch(0.837 0.19 147);
	--color-green-11: oklch(0.85 0.12 147);
	--color-green-12: oklch(0.9 0.08 147);

	--color-red-01: oklch(0.117 0.048 29.2);
	--color-red-02: oklch(0.183 0.075 29.2);
	--color-red-03: oklch(0.25 0.102 29.2);
	--color-red-04: oklch(0.317 0.129 29.2);
	--color-red-05: oklch(0.383 0.156 29.2);
	--color-red-06: oklch(0.45 0.184 29.2);
	--color-red-07: oklch(0.517 0.211 29.2);
	--color-red-08: oklch(0.583 0.238 29.2);
	--color-red-09: oklch(0.65 0.265 29.2);
	--color-red-10: oklch(0.717 0.201 29.2);
	--color-red-11: oklch(0.783 0.144 29.2);
	--color-red-12: oklch(0.85 0.094 29.2);

	/* PageEditorRichText text colors */
	--PageEditorRichText-text-color-fg-default: inherit;
	--PageEditorRichText-text-color-fg-purple: #9333ea;
	--PageEditorRichText-text-color-fg-red: #e00000;
	--PageEditorRichText-text-color-fg-yellow: #eab308;
	--PageEditorRichText-text-color-fg-blue: #2563eb;
	--PageEditorRichText-text-color-fg-green: #008a00;
	--PageEditorRichText-text-color-fg-orange: #ffa500;
	--PageEditorRichText-text-color-fg-pink: #ba4081;
	--PageEditorRichText-text-color-fg-gray: #a8a29e;

	/* PageEditorRichText highlight colors */
	--PageEditorRichText-text-color-bg-default: transparent;
	--PageEditorRichText-text-color-bg-purple: #f6f3f8;
	--PageEditorRichText-text-color-bg-red: #fdebeb;
	--PageEditorRichText-text-color-bg-yellow: #fbf4a2;
	--PageEditorRichText-text-color-bg-blue: #c1ecf9;
	--PageEditorRichText-text-color-bg-green: #acf79f;
	--PageEditorRichText-text-color-bg-orange: #faebdd;
	--PageEditorRichText-text-color-bg-pink: #faf1f5;
	--PageEditorRichText-text-color-bg-gray: #f1f1ef;

	/* App-specific styles */
	font-family: system-ui, Avenir, Helvetica, Arial, sans-serif;
	line-height: 1.5;
	font-weight: 400;
	font-synthesis: none;
	text-rendering: optimizeLegibility;
	-webkit-font-smoothing: antialiased;
	-moz-osx-font-smoothing: grayscale;
}

/* shadcn/ui CSS Variables - Dark Mode */
.dark {
	/* Core shadcn design system variables - dark mode */
	--background: var(--gray-000);
	--foreground: var(--gray-700);
	--card: var(--gray-000);
	--card-foreground: var(--gray-700);
	--popover: var(--gray-000);
	--popover-foreground: var(--gray-700);
	--primary: var(--gray-700);
	--primary-foreground: var(--gray-050);
	--secondary: var(--gray-300);
	--secondary-foreground: var(--gray-700);
	--muted: var(--gray-300);
	--muted-foreground: var(--gray-600);
	--accent: var(--gray-300);
	--accent-foreground: var(--gray-700);
	--destructive: var(--red-400);
	--destructive-foreground: var(--gray-700);
	--border: var(--gray-300);
	--input: var(--gray-300);
	--ring: var(--gray-700);
	--chart-1: 220 70% 50%;
	--chart-2: 160 60% 45%;
	--chart-3: 30 80% 55%;
	--chart-4: 280 65% 60%;
	--chart-5: 340 75% 55%;

	/* Sidebar specific variables - dark mode */
	--sidebar: var(--gray-050);
	--sidebar-foreground: var(--gray-800);
	--sidebar-primary: var(--gray-600);
	--sidebar-primary-foreground: white;
	--sidebar-accent: var(--gray-300);
	--sidebar-accent-foreground: var(--gray-800);
	--sidebar-border: var(--gray-300);
	--sidebar-ring: var(--gray-100);

	/* PageEditorRichText text colors - dark mode */
	--PageEditorRichText-text-color-fg-default: inherit;
	--PageEditorRichText-text-color-fg-purple: #9333ea;
	--PageEditorRichText-text-color-fg-red: #e00000;
	--PageEditorRichText-text-color-fg-yellow: #eab308;
	--PageEditorRichText-text-color-fg-blue: #2563eb;
	--PageEditorRichText-text-color-fg-green: #008a00;
	--PageEditorRichText-text-color-fg-orange: #ffa500;
	--PageEditorRichText-text-color-fg-pink: #ba4081;
	--PageEditorRichText-text-color-fg-gray: #a8a29e;

	/* PageEditorRichText highlight colors - dark mode */
	--PageEditorRichText-text-color-bg-default: transparent;
	--PageEditorRichText-text-color-bg-purple: #3f2c4b;
	--PageEditorRichText-text-color-bg-red: #5c1a1a;
	--PageEditorRichText-text-color-bg-yellow: #5c4b1a;
	--PageEditorRichText-text-color-bg-blue: #1a3d5c;
	--PageEditorRichText-text-color-bg-green: #1a5c20;
	--PageEditorRichText-text-color-bg-orange: #5c3a1a;
	--PageEditorRichText-text-color-bg-pink: #5c1a3a;
	--PageEditorRichText-text-color-bg-gray: #3a3a3a;
}

/* Tailwind CSS v4 Theme Mappings */
@theme inline {
	/* Core design system colors */
	--color-background: var(--background);
	--color-foreground: var(--foreground);
	--color-card: var(--card);
	--color-card-foreground: var(--card-foreground);
	--color-popover: var(--popover);
	--color-popover-foreground: var(--popover-foreground);
	--color-primary: var(--primary);
	--color-primary-foreground: var(--primary-foreground);
	--color-secondary: var(--secondary);
	--color-secondary-foreground: var(--secondary-foreground);
	--color-muted: var(--muted);
	--color-muted-foreground: var(--muted-foreground);
	--color-accent: var(--accent);
	--color-accent-foreground: var(--accent-foreground);
	--color-destructive: var(--destructive);
	--color-destructive-foreground: var(--destructive-foreground);
	--color-border: var(--border);
	--color-input: var(--input);
	--color-ring: var(--ring);
	--color-chart-1: hsl(var(--chart-1));
	--color-chart-2: hsl(var(--chart-2));
	--color-chart-3: hsl(var(--chart-3));
	--color-chart-4: hsl(var(--chart-4));
	--color-chart-5: hsl(var(--chart-5));

	/* Sidebar colors */
	--color-sidebar: var(--sidebar);
	--color-sidebar-foreground: var(--sidebar-foreground);
	--color-sidebar-primary: var(--sidebar-primary);
	--color-sidebar-primary-foreground: var(--sidebar-primary-foreground);
	--color-sidebar-accent: var(--sidebar-accent);
	--color-sidebar-accent-foreground: var(--sidebar-accent-foreground);
	--color-sidebar-border: var(--sidebar-border);
	--color-sidebar-ring: var(--sidebar-ring);

	/* Border radius */
	--radius: var(--radius);
}

/* App Styles */
@layer base {
	* {
		@apply border-border outline-ring/50;
	}

	html.dark {
		color-scheme: dark;
	}

	body {
		@apply bg-background text-foreground;
	}

	#root {
		/* height: 100vh;
		overflow: hidden; */
		isolation: isolate;
	}

	/* App-specific utility styles */
	.logo {
		height: 6em;
		padding: 1.5em;
		will-change: filter;
		transition: filter 300ms;
	}

	.logo:hover {
		filter: drop-shadow(0 0 2em #646cffaa);
	}

	.logo.react:hover {
		filter: drop-shadow(0 0 2em #61dafbaa);
	}

	.card {
		padding: 2em;
	}

	.read-the-docs {
		color: #888;
	}

	/* #region ProseMirror styles */
	.ProseMirror {
		position: relative;
		word-wrap: break-word;
		white-space: break-spaces;
		-webkit-font-variant-ligatures: none;
		font-variant-ligatures: none;
		font-feature-settings: "liga" 0;
	}

	.ProseMirror [contenteditable="false"] {
		white-space: normal;
	}

	.ProseMirror [contenteditable="false"] [contenteditable="true"] {
		white-space: pre-wrap;
	}

	.ProseMirror pre {
		white-space: pre-wrap;
	}

	img.ProseMirror-separator {
		display: inline !important;
		border: none !important;
		margin: 0 !important;
		width: 0 !important;
		height: 0 !important;
	}

	.ProseMirror-gapcursor {
		display: none;
		pointer-events: none;
		position: absolute;
		margin: 0;
	}

	.ProseMirror-gapcursor:after {
		content: "";
		display: block;
		position: absolute;
		top: -2px;
		width: 20px;
		border-top: 1px solid black;
		animation: ProseMirror-cursor-blink 1.1s steps(2, start) infinite;
	}

	.ProseMirror-hideselection *::selection {
		background: transparent;
	}

	.ProseMirror-hideselection *::-moz-selection {
		background: transparent;
	}

	.ProseMirror-hideselection * {
		caret-color: transparent;
	}

	.ProseMirror-focused .ProseMirror-gapcursor {
		display: block;
	}

	@keyframes ProseMirror-cursor-blink {
		to {
			visibility: hidden;
		}
	}
	/* #endregion ProseMirror styles */

	@keyframes logo-spin {
		from {
			transform: rotate(0deg);
		}
		to {
			transform: rotate(360deg);
		}
	}

	@media (prefers-reduced-motion: no-preference) {
		a:nth-of-type(2) .logo {
			animation: logo-spin infinite 20s linear;
		}
	}
}
