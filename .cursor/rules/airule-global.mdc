---
description:
globs:
alwaysApply: true
---

# Package manager

This repository uses `pnpm` do not use `npm`.

# Running commands in the terminal

Do not run `pnpm run dev` let the user run it manually.

# +personal/ folder

The [+personal/](mdc:+personal) folder is used to keep indexed personal user notes, you are not allowed to write in this folder. However the content can be used a documentation reference.

You can however write inside [+personal/+ai/](mdc:+personal/+ai).

# Code guidelines

You must not use `any` to bypass typescript errors unless the user is asking for it.

The code of the app is located at [src/](mdc:src).

The [src/server/](mdc:src/server) folder contains the Hono server code.

The [convex/](mdc:convex) folder contains the Convex code.

## Casing

Use snake_case for all multi-word variables and functions.

You can namespace code using snake_case syntax such as:

```ts
// namespaced constant
export const ai_chat_HARDCODED_PROJECT_ID = "app_project_local_dev";

// namespaced class
export class ai_chat_MyClass {
	constructor(public readonly project_id: string) {}
}

// namespaced interface
export interface ai_chat_MyInterface {
	project_id: string;
}

// namespaced type
export type ai_chat_MyType = {
	project_id: string;
};

// namespaced function
export function ai_chat_my_function(project_id: string) {
	return project_id;
}

// namespaced enum
export enum ai_chat_MyEnum {
	PROJECT_ID = "app_project_local_dev",
}
```

Namespacing will allow to better organize the results from the IDE autocompletion.

### Naming hooks

Use camelCase for global hooks.

```ts
// use-theme.ts
function useTheme() {
	return {
		mode: "light",
		resolved_theme: "light",
		set_mode: () => {},
	};
}

// component.tsx
const { mode, resolved_theme, set_mode } = useTheme();
```

You can namespace hooks using snake_case syntax such as:

```ts
// use-theme.ts
function useAiChat_grouped_threads() {
	// ...
}
```

### Interacting with 3rd party functions or native JavaScript functions

If a function is imported as camelCase, keep it as is, do not rename it.

```ts
import { randomUUID } from "node:crypto";

const uuid = randomUUID();
```

```ts
window.matchMedia("(prefers-color-scheme: dark)").matches;
```
